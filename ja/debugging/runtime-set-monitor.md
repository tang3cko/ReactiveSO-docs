---
layout: default
title: Runtime Set Monitor
parent: デバッグ
nav_order: 4
---

# Runtime set monitor

{: .note }
> v1.1.0以降で利用可能。

## 目的

このガイドでは、ランタイムセットの内容をリアルタイムで追跡するためのRuntime Set Monitor Windowの使用方法を説明します。各セットに現在含まれているオブジェクトの確認と、ゲームプレイ中のコレクション変更の監視方法を学びます。

---

## ウィンドウを開く

**Window > Reactive SO > Runtime Set Monitor**に移動します。

<!-- TODO: Add screenshot of Runtime Set Monitor Window showing list of runtime sets with their item counts -->

---

## ウィンドウの列

| 列 | 説明 |
|--------|-------------|
| Runtime Set | ランタイムセットアセットの名前 |
| Type | 要素の型 (GameObject、Transformなど) |
| Count | セットに現在含まれているアイテム数 |
| Status | count > 0の場合Active（緑）、count = 0の場合Empty（灰色） |
| -> | Projectウィンドウでアセットをpingして選択するボタン |

---

## 機能

### 型フィルタリング

型ドロップダウンを使用して、要素の型でランタイムセットをフィルタリングします。GameObjectやTransformなどの特定のカテゴリに焦点を当てるのに役立ちます。

### 検索

検索ボックスに入力してセットを名前でフィルタリングします。多くのランタイムセットがあり、特定のものを素早く見つける必要がある場合に便利です。

### アセットをPing

->ボタンをクリックするか、行をダブルクリックすると、Projectウィンドウでアセットがpingされます。アセットも選択されるため、すぐにInspectorで内容を確認できます。

### リアルタイムカウント

CountとStatus列はPlay Mode中に200msごとに自動更新されます。自動更新がアクティブな場合、フッターに[LIVE]インジケーターが表示されます。

### ステータスインジケーター

Status列はセットの状態を素早く視覚的に確認できます。

- **Active**（緑テキスト）- 1つ以上のアイテムを含む
- **Empty**（灰色テキスト）- アイテムを含まない

### 更新ボタン

ツールバーの更新ボタンをクリックして、プロジェクトからすべてのランタイムセットを手動で再読み込みします。新しいランタイムセットアセットを作成した後、ウィンドウを再度開かずにリストを更新するために使用します。

---

## ユースケース

### オブジェクト登録の検証

スポーンした敵が正しく登録されていることを確認します。5体の敵をスポーンしたのにカウントが3を示している場合、一部の敵が登録に失敗している可能性があります。

### オブジェクトクリーンアップのデバッグ

オブジェクトを破棄した後、セットから正しく登録解除されていることを確認します。`Destroy()`後にカウントが減少しない場合、`OnDisable`での登録解除が不足しています。

### 生成制限の監視

スポーン制限のあるシステムでは、制限が守られていることをカウントで確認します。`ActiveEnemies`が10を超えないはずなのに12を示している場合、スポーン制限機能にバグがあります。

### シーン遷移の検証

シーン遷移後、セットが期待通りにクリアまたは保持されていることを確認します。永続的なセットはカウントを維持し、シーン固有のセットはリセットされるべきです。

---

## セット内容の表示

Runtime Set Monitorはカウントを表示しますが、内容は表示しません。セット内の実際のアイテムを確認するには、Play Mode中にランタイムセットアセットを選択してInspectorを確認します。

Inspectorには、セット内の各オブジェクトがRuntime Itemsリストとして表示されます。任意のアイテムをクリックすると、Hierarchyでpingされます。

---

## よくある問題

### カウントがゼロのまま

ゲームプレイ中にランタイムセットのカウントが増加しない場合、オブジェクトが`OnEnable`メソッドで`Add()`を呼び出していること、および正しいアセットが割り当てられていることを確認します。

### カウントが増え続ける

カウントが増加するが減少しない場合、オブジェクトが登録解除されていません。`Remove()`が`OnDestroy`ではなく`OnDisable`で呼び出されていることを確認します。

### nullエントリーが表示される

Inspectorにnullエントリーが表示される場合、オブジェクトが適切な登録解除なしに破棄されました。`CleanupDestroyed()`を呼び出すか、登録パターンを修正します。

---

## ヒント

- プレイテスト中にカウントを監視して、登録バグを早期に発見
- オブジェクトスポーン後に期待値と実際のカウントを比較
- Event Monitorと併用して登録イベントを関連付ける
- 詳細なオブジェクト情報はInspectorでセット内容を確認

---

## 参考資料

- [ランタイムセットガイド]({{ '/ja/guides/runtime-sets' | relative_url }}) - ランタイムセットの使い方
- [デバッグ概要]({{ '/ja/debugging/' | relative_url }}) - すべてのデバッグツール
- [変数モニター](variable-monitor) - リアルタイム変数追跡
